
jQuery(document).ready(function($){console.log("init 0.1");var Calc;Calc={attrs:{hotel:"A",datefrom:"",timefrom:"",hour:4,adults:1,kids:0,send_data:"Y",lang:"ru",},elements:{},request:"/booking/",init:function(){console.log("Cart");this.prepareDOM();this.initCallbacks();this.initSpinners();this.initDatetime();this.formRequest();},prepareDOM:function(){Calc.root=$("#calc");Calc.elements.hotel=Calc.root.find("input[name=\"hotel\"]");Calc.elements.datefrom=Calc.root.find("input[name=\"datefrom\"]");Calc.elements.timefrom=Calc.root.find("input[name=\"timefrom\"]");Calc.elements.hour=Calc.root.find("input[name=\"hour\"]");Calc.elements.adults=Calc.root.find("input[name=\"adults\"]");Calc.elements.kids=Calc.root.find("input[name=\"kids\"]");Calc.elements.button=Calc.root.find(".calc__btn");},initCallbacks:function(){Calc.elements.button.click(function(e){if(Calc.prepareData()){window.location=Calc.request;}});},initSpinners:function(){Calc.root.on("keydown",".spinner-input",function(e){var val;if(e.which==38){val=parseInt($(this).val())+1;}else if(e.which==40){val=parseInt($(this).val())-1;}
if(val<1)val=1;if(val>99)val=99;$(this).val(val);return false;});Calc.root.on("change",".spinner-input",function(e){return false;});Calc.root.on("click",".spinner-button",function(e){console.log("spinner button click");var target=$(this).siblings(".spinner-input");var val;if($(this).hasClass("spinner-up")){val=parseInt(target.val())+1;}else{val=parseInt(target.val())-1;}
if(val<1)val=1;if(val>99)val=99;$(target).val(val).change();return false;});},initDatetime:function(){console.log("initDatetime");Calc.elements.datefrom.datepicker({userLang:"ru",mode:"range",regional:"ru",showButtonPanel:false,hideIfNoPrevNext:true,firstDay:"1",dateFormat:"dd.mm.yy",});},formRequest:function(){var request="/booking/?";Object.keys(this.attrs).forEach(function(key){var val=this.attrs[key];if(val){request+="&"+key+"="+this.attrs[key];}});return request;},prepareData:function(){},};Calc.init();});